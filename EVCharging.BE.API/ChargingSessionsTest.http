### EV Charging Station Management System - Charging Sessions API Tests

### 1. Start a new charging session
POST https://localhost:5167/api/chargingsessions/start
Authorization: Bearer YOUR_TOKEN_HERE
Content-Type: application/json

{
  "chargingPointId": 1,
  "driverId": 1,
  "initialSOC": 20,
  "qrCode": "QR123456789",
  "notes": "Starting charging session"
}

### 2. Update session status with real-time data
PUT https://localhost:5167/api/chargingsessions/status
Authorization: Bearer YOUR_TOKEN_HERE
Content-Type: application/json

{
  "sessionId": 1,
  "status": "in_progress",
  "currentSOC": 35,
  "currentPower": 7.5,
  "voltage": 400,
  "temperature": 25.5
}

### 3. Create session log
POST https://localhost:5167/api/chargingsessions/logs
Authorization: Bearer YOUR_TOKEN_HERE
Content-Type: application/json

{
  "sessionId": 1,
  "socPercentage": 40,
  "currentPower": 8.2,
  "voltage": 405,
  "temperature": 26.0
}

### 4. Get session by ID
GET https://localhost:5167/api/chargingsessions/1
Authorization: Bearer YOUR_TOKEN_HERE

### 5. Get active sessions
GET https://localhost:5167/api/chargingsessions/active
Authorization: Bearer YOUR_TOKEN_HERE

### 6. Get sessions by driver
GET https://localhost:5167/api/chargingsessions/driver/1
Authorization: Bearer YOUR_TOKEN_HERE

### 7. Get sessions by station
GET https://localhost:5167/api/chargingsessions/station/1
Authorization: Bearer YOUR_TOKEN_HERE

### 8. Get session logs
GET https://localhost:5167/api/chargingsessions/1/logs
Authorization: Bearer YOUR_TOKEN_HERE

### 9. Calculate charging cost
POST https://localhost:5167/api/chargingsessions/calculate-cost
Authorization: Bearer YOUR_TOKEN_HERE
Content-Type: application/json

{
  "chargingPointId": 1,
  "energyUsed": 15.5,
  "durationMinutes": 120,
  "userId": 1,
  "membershipTier": "gold",
  "isPeakHours": false
}

### 10. Get real-time session status
GET https://localhost:5167/api/chargingsessions/1/status
Authorization: Bearer YOUR_TOKEN_HERE

### 11. Get session analytics
GET https://localhost:5167/api/chargingsessions/1/analytics
Authorization: Bearer YOUR_TOKEN_HERE

### 12. Estimate remaining time
GET https://localhost:5167/api/chargingsessions/1/estimate-time?targetSOC=80
Authorization: Bearer YOUR_TOKEN_HERE

### 13. Stop charging session
POST https://localhost:5167/api/chargingsessions/stop
Authorization: Bearer YOUR_TOKEN_HERE
Content-Type: application/json

{
  "sessionId": 1,
  "finalSOC": 85,
  "reason": "Charging completed"
}

### 14. Test SignalR Connection (WebSocket)
# Connect to: ws://localhost:5167/chargingHub
# Send: {"protocol": "json", "version": 1}
# Join session group: {"arguments": [1], "target": "JoinSessionGroup", "type": 1}
# Join driver group: {"arguments": [1], "target": "JoinDriverGroup", "type": 1}
# Join station group: {"arguments": [1], "target": "JoinStationGroup", "type": 1}
