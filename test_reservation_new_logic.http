### Test API đặt chỗ mới - Logic tìm trạm sạc phù hợp và chọn khung giờ

# 1. Tìm kiếm trạm sạc phù hợp với xe
# Người dùng tự chọn loại cổng sạc của xe mình (CCS, CHAdeMO, Type2, etc.)
POST {{host}}/api/reservations/search-stations
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "connectorType": "CCS",
  "date": "2024-01-15T00:00:00Z",
  "latitude": 10.762622,
  "longitude": 106.660172,
  "radiusKm": 10
}

###

# 2. Lấy danh sách điểm sạc phù hợp tại một trạm cụ thể
GET {{host}}/api/reservations/stations/1/compatible-points?connectorType=CCS
Authorization: Bearer {{token}}

###

# 3. Lấy danh sách khung giờ có sẵn cho một điểm sạc
GET {{host}}/api/reservations/points/1/time-slots?date=2024-01-15T00:00:00Z
Authorization: Bearer {{token}}

###

# 4. Tạo đặt chỗ với logic mới (Date + Hour)
POST {{host}}/api/reservations
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "pointId": 1,
  "date": "2024-01-15T00:00:00Z",
  "hour": 14
}

###

# 5. Tạo đặt chỗ với logic cũ (tương thích ngược)
POST {{host}}/api/reservations
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "pointId": 1,
  "legacyStartTime": "2024-01-15T14:00:00Z",
  "durationMinutes": 60
}

###

# 6. Lấy danh sách đặt chỗ của tôi
GET {{host}}/api/reservations/me?page=1&pageSize=10
Authorization: Bearer {{token}}

###

# 7. Lấy các đặt chỗ sắp tới
GET {{host}}/api/reservations/upcoming?hours=48
Authorization: Bearer {{token}}

###

# 8. Huỷ đặt chỗ
DELETE {{host}}/api/reservations/1?reason=Thay đổi kế hoạch
Authorization: Bearer {{token}}

###

# 9. Lấy mã QR cho đặt chỗ
GET {{host}}/api/reservations/1/qrcode
Authorization: Bearer {{token}}

###
